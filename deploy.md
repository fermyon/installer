# Deploying to Fermyon

Once Fermyon is up and running via your
[installer of choice](./README.md#installers) and you've prepared your
environment with relevant values for Hippo and Bindle, you're ready to deploy
your first app.

## Prerequisites

For building and deploying Spin apps on Fermyon, you'll need the
[Spin CLI](https://spin.fermyon.dev/quickstart). The following example uses
Spin [v0.6.0](https://github.com/fermyon/spin/releases/tag/v0.6.0).

## Example flow

First, install the example application templates via Spin:

```console
$ spin templates install --git https://github.com/fermyon/spin
Copying remote template source
Installing template redis-rust...
Installing template http-grain...
Installing template http-swift...
Installing template http-c...
Installing template http-rust...
Installing template http-go...
Installing template http-zig...
Installing template redis-go...
Installed 8 template(s)

+-----------------------------------------------------------------+
| Name         Description                                        |
+=================================================================+
| http-c       HTTP request handler using C and the Zig toolchain |
| http-go      HTTP request handler using (Tiny)Go                |
| http-grain   HTTP request handler using Grain                   |
| http-rust    HTTP request handler using Rust                    |
| http-swift   HTTP request handler using SwiftWasm               |
| http-zig     HTTP request handler using Zig                     |
| redis-go     Redis message handler using (Tiny)Go               |
| redis-rust   Redis message handler using Rust                   |
+-----------------------------------------------------------------+
```

Here we'll choose the `http-rust` example and create a new app:

```console
$ spin new http-rust myapp
Project description: My first Fermyon app
HTTP base: /
HTTP path: /hello
```

You're ready to navigate into the app directory and build it from source:

```console
$ cd myapp/

$ spin build
<build output omitted>
```

Next, you can log in to the platform using Spin, providing the credentials
generated by your installer mode of choice.

This command will attempt to read URL, username and password values from the
environment. If not present and not passed in as arguments, they can be
entered manually.

As of writing, the platform launched via these installers only supports the
second option, `Sign in with a username and password`.

Here's an example showing how to log in to the platform running locally:

```
$ spin login --url http://hippo.local.fermyon.link
What authentication method does this server support?

1. Sign in with GitHub
2. Sign in with a username and password

Enter a number: 2
Hippo username: newuser
Hippo password:
Bindle URL: http://bindle.local.fermyon.link/v1
Bindle username (blank for unauthenticated):
```

> Be sure to include the trailing `/v1` on the Bindle URL.

Finally, you are ready to deploy:

```console
$ spin deploy
Uploading myapp version 0.1.0+q4a61da1...
Deployed myapp version 0.1.0+q4a61da1
Waiting for application to become ready................ ready
Available Routes:
  myapp: http://spin-deploy.myapp.local.fermyon.link/hello
```

You can then hit your app's served route (`/hello`) via its URL.

```console
$ curl http://spin-deploy.myapp.local.fermyon.link/hello
Hello, Fermyon
```

_Note: in some scenarios, the app may not be immediately reachable. For
instance, app routing (via Traefik) may still be pending, or the app itself may
require a few seconds to launch and pass health checks. During this time, you
may encounter `502 Bad Gateway` or `404 Not Found` response codes on requests._

You can also find the app URL by navigating to the Hippo dashboard (`$HIPPO_URL`), loggging in
with the `$HIPPO_USERNAME` and `$HIPPO_PASSWORD` values and then clicking on the app page.

Congratulations, you've deployed your first Fermyon app!

## Deploying new versions of your app

Making changes to your app is as easy as updating the source code, re-building
and re-deploying.

To see this in practice, update the message to `Hello, Fermyon!` in the app's
source code and save your changes. After a fresh build and deploy, the
new version of your app will be live:

```console
$ spin build
<build output omitted>

$ spin deploy
Uploading myapp version 0.1.0+q51c63ed...
Deployed myapp version 0.1.0+q51c63ed
Waiting for application to become ready.......... ready
Available Routes:
  myapp: http://spin-deploy.myapp.local.fermyon.link/hello

$ curl http://spin-deploy.myapp.local.fermyon.link/hello
Hello, Fermyon!
```

## Wrapping up

In this guide, we walked through deploying multiple versions of your first
application on Fermyon.

We hope this experience inspires you to explore further. For in-depth guides
and further information, see the
[Spin documentation](https://spin.fermyon.dev/) or
[Hippo documentation](https://docs.hippofactory.dev/).